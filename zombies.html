<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0" />

    <style type="text/css">
      ul { list-style: none; }
      .selected { background-color: red; }
      .highlighted { border: 3px solid green; }
      .brushes li { float: left; }
      .shapes li { float: left; }
      .canvas { float: left; }
    </style>
  </head>
  <body>
    <script type="text/x-handlebars" data-template-name="application">
      {{outlet main}}
    </script>

    <script type="text/x-handlebars" data-template-name="workspace">
      Brushes
      <ul class="brushes">
        {{#each shape in content.brushes}}
        <li>
          {{#view Animator.ComparisonView leftBinding="content.selectedBrush" rightBinding="shape"}}
          <button {{action selectBrush shape}} {{bindAttr class="view.equal:selected"}}>
            {{view Animator.ShapeView shapeBinding="shape" canvasWidth="32" canvasHeight="32"}}
          </button>
          {{/view}}
        </li>
        {{/each}}
      </ul>

      Canvas
      <div class="canvas">
        {{view Animator.CanvasView canvasWidth="640" canvasHeight="480" mouseStateManagerBinding="content.canvasMouseStateManager" 
        highlightedShapes="content.highlightedShapes"
        selectedShape="content.selectedBrush"
        draggedShapes="content.draggedShapes"}}
      </div>

      Shapes
      <ul class="shapes">
        {{#each shape in content.shapes}}
        <li>
          {{#view}}
          {{view Animator.ComparisonView leftBinding="shape" rightBinding="content.draggedShapes" viewName="draggedShapes"}}
          {{view Animator.ComparisonView leftBinding="shape" rightBinding="content.highlightedShapes" viewName="highlightedShapes"}}
          <button {{bindAttr class="view.draggedShapes.contains:selected view.highlightedShapes.contains:highlighted"}}>
          {{view Animator.ShapeView shapeBinding="shape" canvasWidth="32" canvasHeight="32"}}
          </button>
          {{/view}}
          <ul>
            {{#each animation in shape.properties.animations}}
            <li><a href="#" {{action animate shape animation}}>{{this.name}}</a></li>
            {{/each}}
          </ul>
        </li>
        {{/each}}
      </ul>

      Properties
      <ul class="shapes">
        {{#each shape in content.selectedShapes}}
        <li>
          {{shape.properties.dump}}
        </li>
        {{/each}}
      </ul>


      Timeline
      {{view Animator.TimelineView}}
    </script>
    <script type="text/x-handlebars" data-template-name="timeline">
      <ul class="shapes">
      </ul>      
    </script>    

    <script src="require.js" data-main="zombies"></script>
  </body>
</html>
