<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0" />

    <style type="text/css">
      .selected { background-color: red; }
    </style>
  </head>
  <body>
    <script type="text/x-handlebars" data-template-name="application">
      {{outlet main}}
    </script>

    <script type="text/x-handlebars" data-template-name="canvas">
      <canvas 
         {{bindAttr width="view.width"}} 
         {{bindAttr height="view.height"}} style="border: 1px dotted black;"

         {{action mouseDown view on="mouseDown" target="view" }}
         {{action mouseUp view on="mouseUp" target="view" }}
         {{action mouseMove view on="mouseMove" target="view" }}
         {{action mouseEnter view on="mouseEnter" target="view" }}
         {{action mouseLeave view on="mouseLeave" target="view" }}>
      </canvas>
    </script>

    <script type="text/x-handlebars" data-template-name="part">
      <canvas id="canvas" {{bindAttr width="view.width"}} {{bindAttr height="view.height"}} style="border: 1px dotted black;"></canvas>
    </script>

    <script type="text/x-handlebars" data-template-name="workspace">
      Brushes
      <ul class="brushes">
        {{#each part in content.brushes}}
        {{#view Animator.ComparisonView leftBinding="content.selectedBrush" rightBinding="part"}}
        <li>
          <button {{action selectBrush part}} {{bindAttr class="view.equal:selected"}}>
            {{view Animator.PartView partBinding="part" width="32" height="32"}}{{/view}}
          </button>
        </li>
        {{/each}}
      </ul>

      Canvas
      {{view Animator.CanvasView width="640" height="480"}}
      
      Shapes
      <ul class="shapes">
        {{#each shape in content.shapes}}
        <li>{{view Animator.ShapeView shapeBinding="shape" width="64" height="64"}}
          <ul>
            {{#each animation in part.properties.animations}}
            <li><a href="#" {{action animate part animation}}>{{this.name}}</a></li>
            {{/each}}
          </ul>
        </li>
        {{/each}}
      </ul>

      Timeline
      {{view Animator.TimelineView}}
    </script>
    <script type="text/x-handlebars" data-template-name="timeline">
      <ul class="shapes">
      </ul>      
    </script>    

    <script src="require.js" data-main="zombies"></script>
  </body>
</html>
